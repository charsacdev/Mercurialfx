<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mercurial - Broadcast</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.css" rel="stylesheet">

    <link rel="stylesheet" href="../css/admin.css">
    <link rel="shortcut icon" href="../img/icon.png">
</head>
<body>

    <div class="offcanvas offcanvas-start bg-dark text-white" tabindex="-1" id="sidebarOffcanvas" aria-labelledby="sidebarOffcanvasLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="sidebarOffcanvasLabel">
                <img src="../img/headerlogo.png" class="img-fluid">
            </h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body p-0">
            <div class="sidebar-nav">
                <ul class="list-unstyled">
                    <li><a href="index.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="users.html"><i class="fas fa-users"></i> Users</a></li>
                    <li class="with-badge"><a href="transactions.html"><i class="fas fa-exchange-alt"></i> Transactions <span class="badge text-bg-secondary ms-2">18</span></a></li>
                    <li class="with-badge"><a href="kyc.html"><i class="fas fa-check-circle"></i> KYC <span class="badge text-bg-secondary ms-2">30</span></a></li>
                    <li><a href="privacy_policy.html"><i class="fas fa-file-contract"></i> Privacy Policy</a></li>
                    <li><a href="terms_of_service.html"><i class="fas fa-file-alt"></i> Terms of Service</a></li>
                    <li class="active"><a href="broadcast.html"><i class="fas fa-broadcast-tower"></i> Broadcast</a></li>
                    <li><a href="inbox.html"><i class="fas fa-envelope"></i> Messages</a></li>
                    <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
                </ul>
            </div>
            <div class="sidebar-footer">
                <a href="#"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </div>
        </div>
    </div>
    <div class="main-wrapper">
        <div class="d-none d-lg-block sidebar-desktop bg-dark text-white p-3 vh-100 position-fixed">
            <div class="mercurial-logo mb-4">
                <h4 class="text-white">
                    <img src="../img/headerlogo.png" class="img-fluid">
                </h4>
            </div>
            <div class="sidebar-nav">
                <ul class="list-unstyled">
                    <li><a href="index.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="users.html"><i class="fas fa-users"></i> Users</a></li>
                    <li class="with-badge"><a href="transactions.html"><i class="fas fa-exchange-alt"></i> Transactions <span class="badge text-bg-secondary ms-2">18</span></a></li>
                    <li class="with-badge"><a href="kyc.html"><i class="fas fa-check-circle"></i> KYC <span class="badge text-bg-secondary ms-2">30</span></a></li>
                    <li><a href="privacy_policy.html"><i class="fas fa-file-contract"></i> Privacy Policy</a></li>
                    <li><a href="terms_of_service.html"><i class="fas fa-file-alt"></i> Terms of Service</a></li>
                    <li class="active"><a href="broadcast.html"><i class="fas fa-broadcast-tower"></i> Broadcast</a></li>
                    <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
                </ul>
            </div>
            <div class="sidebar-footer">
                <a href="#"><i class="fas fa-sign-out-alt"></i> Logout</a>
            </div>
        </div>

        <div class="flex-grow-1 p-4 content-area">

            <div class="d-flex justify-content-between align-items-center mb-4">
                <button class="btn btn-dark d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarOffcanvas" aria-controls="sidebarOffcanvas">
                    <i class="fas fa-bars"></i>
                </button>
                <h2 class="dashboard-title">&nbsp;Broadcast</h2>
                <div class="d-flex align-items-center profile-section ms-auto ms-lg-0">
                    <div class="profile-circle me-2">C</div>
                    <div class="d-none d-sm-block">
                        <small class="d-block profile-name">Charsac Tech.</small>
                        <small class="d-block profile-role">Admin</small>
                    </div>
                    <i class="fas fa-angle-down text-muted ms-2 d-none d-sm-block"></i>
                </div>
            </div>

            <div class="card p-4 shadow-sm border-0 broadcast-card">
                
                <form id="broadcastForm">
                    <div class="mb-4">
                        <select class="form-select broadcast-select" aria-label="Recipient select" id="recipientSelect">
                            <option value="all" selected>To All Users</option>
                            <option value="active">To Active Users</option>
                            <option value="kyc_pending">To KYC Pending Users</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <input type="text" class="form-control broadcast-subject-input" id="broadcastSubject" placeholder="Maintainance Check" value="Maintainance Check">
                    </div>

                    <div class="mb-4">
                        <label for="summernoteBroadcast" class="form-label visually-hidden">Message Body</label>
                        <textarea id="summernoteBroadcast" name="broadcastbody">
                            Lorem ipsum dolor sit amet consectetur. Sed diam enim sed sit. Gravida ut nunc accumsan amet ut porttitor cras. Laoreet a euismod nunc sollicitudin. Rhoncus etiam dolor ullamcorper dolor tempus. Sem id pellentesque etiam ut lorem amet. At ipsum mi nunc orci vitae non imperdiet tincidunt urna leo maecenas dictum nibh lectus amet cras feugiat nibh massa. Mus sollicitudin lorem nisi est suspendisse accumsan porttitor integer. Vehicula eget sit semper urna integer vestibulum ullamcorper venenatis volutpat. Adipiscing et nisl cras pellentesque turpis scelerisque faucibus a. Dictum in amet posuere eget. Sed enim praesent pellentesque ac. Enim est tempor ut vulputate neque. Curabitur et velit hendrerit et arcu tristique diam. Scelerisque nullam felis dictum quisque nibh. Enim eleifend purus nunc volutpat. Faucibus urna vitae arcu massa in nunc leo. Tristique sed sed nibh dictumst aenean mattis faucibus enim. Pharetra in etiam cras lacus a. Nullam ullamcorper tortor diam vitae risus elementum ipsum dignissim dapibus. Viverra in ullamcorper ac donec condimentum lacus. Congue cursus faucibus est venenatis ut tempor eleifend. Amet fringilla enim id mauris sem. Risus mattis odio condimentum magna fermentum. Laoreet diam enim phasellus non rhoncus a ut. Pharetra tellus ac sit tincidunt. Eu ipsum amet tempus amet bibendum ut at tincidunt. Eu lobortis sed faucibus est scelerisque mi massa id urna. Sed urna consectetur libero facilisi dignissim eget dictumet dolor. Vulputate senectus enim in placerat tincidunt vitae elementum consequat.
                        </textarea>
                    </div>

                    <div class="d-flex justify-content-end">
                        <button type="submit" class="btn btn-primary broadcast-send-btn">Send Broadcast</button>
                    </div>
                </form>

            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.js"></script>
    
    <script>
        $(document).ready(function() {
            // 1. Initialize Summernote for Broadcast
            $('#summernoteBroadcast').summernote({
                placeholder: 'Write your broadcast message here...',
                tabsize: 2,
                height: 350, // Slightly taller for broadcast
                toolbar: [
                    ['style', ['style']],
                    ['font', ['bold', 'italic', 'underline', 'clear']],
                    ['fontsize', ['fontsize']],
                    ['color', ['color']],
                    ['para', ['ul', 'ol', 'paragraph']],
                    ['insert', ['link', 'hr']],
                    ['view', ['fullscreen', 'codeview']],
                ]
            });
            
            // 2. Logic for handling the form submission
            $('#broadcastForm').on('submit', function(e) {
                e.preventDefault();
                
                const recipient = $('#recipientSelect').val();
                const subject = $('#broadcastSubject').val();
                // Get content from Summernote
                const body = $('#summernoteBroadcast').summernote('code');
                
                // Simple validation (checking for text content)
                if (!subject.trim() || body.trim() === '' || body === '<p><br></p>') {
                    alert('Please enter a subject and a message body.');
                    return;
                }
                
                console.log("--- Sending Broadcast (Rich Text) ---");
                console.log(`To: ${recipient}`);
                console.log(`Subject: ${subject}`);
                console.log(`Message Body (HTML content): ${body.substring(0, 100)}...`);
                
                // Temporary feedback and button change
                const sendBtn = $('.broadcast-send-btn');
                sendBtn.text('Sending...').prop('disabled', true);

                setTimeout(() => {
                    sendBtn.text('Broadcast Sent!').addClass('btn-success').removeClass('btn-primary');
                    
                    // Reset after a delay
                    setTimeout(() => {
                        sendBtn.text('Send Broadcast').addClass('btn-primary').removeClass('btn-success').prop('disabled', false);
                    }, 2000);
                }, 1500);
            });
        });
    </script>
</body>
</html>